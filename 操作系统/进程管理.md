同样，切换进程时，系统需要保存进程所处的CPU环境，并为新进程设置运行环境，而线程切换仅需要保存少量的寄存器数据，因此开销较小。

进程状态：创建/就绪/运行/阻塞/死亡

就绪到运行：当一个进程获取到时间片时，将从就绪态转为运行态；

运行到就绪：当一个运行进程的时间片用完或者被更高级别的进程抢占CPU时，就将从运行态转为就绪态；

运行到阻塞：运行进程在等待某一个事件发生时，如等待某一资源可用时，将从运行态转为阻塞态；

阻塞到就绪：当阻塞进程所等待的某一事件发生时，如等待的某一资源已可用时，就将从阻塞态转为就绪态，等待CPU的进一步调度运行。

进程同步：

临界区：访问临界资源的那段代码，各个进程在进入临界区之前都需要进行检查。

互斥与同步

同步：多个进程之间因为合作关系而相互制约，进而产生这些进程间的先后执行关系；

互斥：多个进程在同一时刻只有一个能够访问临界区。

信号量：信号量是一个整型，同一时刻允许多个进程访问同一公共资源，但需要控制同一时刻访问该资源的最大进程数量。可以执行PV操作，当信号量大于0时，允许进程访问，执行P操作，当小于等于0时，不允许访问，直到其他进程执行V操作使得信号量大于0。

管程：信号量机制需要客户端编写相应的资源访问同步代码，使用复杂，容易出错。管程通过将资源的操作代码独立出来，不仅不易出错，还方便客户端使用。

进程同步的方式：原子操作、信号量机制、管程。

线程同步的方式：

互斥量：通过互斥对象对公共资源的访问进行控制，只有拥有互斥对象的线程才可以访问资源，由于互斥量只有一个，因此可以保证同一时刻访问资源的线程只有一个。java的synchronized和各种lock使用这种互斥量机制。

信号量：同一时刻允许多个线程访问某一公共资源，但需要对同一时刻访问该资源的最大线程数量进行控制。

事件（信号）：通过通知的方式来进行线程间的同步，该方式还能够很容易的实现线程的优先级关系，Java的wait/notify。

进程通信方式：

1、共享存储块：多个进程之间通过访问一块公共内存块进行数据交换，由于数据不需要在各个进程间相互复制，因此是最快的一种进程通信方式。

2、消息传递：多个进程之间以一种格式化的数据进行传递。分为直接消息传递和简介消息传递，直接消息传递发送进程将消息发送到接收进程的消息缓冲区中。间接消息传递通过系统的一块空间作为传递的中间实体，发送进程往该实体中发送消息，而接收进程再去该中间实体中取出消息。

3、管道：通过系统调用pipe()函数进行创建，是一种固定大小的文件，称为pipe文件，使用限制：是一种半双工通信；只能用于父子进程/兄弟进程之间。

4、命名管道：与管道类似，不同的是消除了只能用于父子进程/兄弟进程之间的限制条件。

5、socket：与其他方式不同，它可用于不同主机的进程之间的通信。



