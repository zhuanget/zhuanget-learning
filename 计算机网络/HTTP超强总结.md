## 报文结构

1.起始行：描述请求或响应的基本信息；

2.头部字段集合：使用key-value形式更详细地说明报文；

3.消息正文：实际传输的数据，它不一定是纯文本，可以是图片、视频等二进制数据。

起始行和头部字段经常又合称为“请求头”或“响应头”，消息正文又称为“实体”。

HTTP协议规定报文必须有header，但可以没有body，而且在header之后必须要有一个“空行”，也就是“CRLF”。

![报文结构](D:\学习\记录笔记\zhuanget-learning\图片\62e061618977565c22c2cf09930e1d3c.png)

## 请求行

请求报文里的起始行，即请求行，它简要地描述了客户端想要如何操作服务器端的资源。

请求行由三部分构成：

1.请求方法：是一个动词，如GET/POST，表示对资源的操作；

2.请求目标：通常是一个URI，标记了请求方法要操作的资源；

3.版本号：表示报文使用的HTTP协议版本。

这三个部分通常使用空格来分隔，最后要用CRLF换行表示结束。

![请求行](D:\学习\记录笔记\zhuanget-learning\图片\请求行.png)

## 状态行

响应报文里的起始行，叫“状态行”，意思是服务器响应的状态。

状态行同样是由三部分构成：

1.版本号：表示报文使用的HTTP协议版本；

2.状态码：一个三位数，用代码的形式表示处理的结果；

3.原因：状态码的补充说明，是更详细的解释文字，帮助人理解原因。

![状态行](D:\学习\记录笔记\zhuanget-learning\图片\状态行.png)

## 头部字段

头部字段是key-value的形式，key和value之间用“:”分隔，最后用CRLF换行表示字段结束。

### 常用头字段

HTTP协议规定了非常多的头部字段，基本上可以分为四大类：

1.通用字段：在请求头和响应头里都可以出现；

2.请求字段：仅能出现在请求头里，进一步说明请求信息或者额外的附件条件；

3.响应字段：仅能出现在响应头里，补充说明响应报文的信息；

4.实体字段：它实际上属于通用字段，但专门描述body的额外信息。

#### Host

请求字段，HTTP/1.1规范里要求必须出现的字段。Host字段告诉服务器这个请求应该由哪个主机来处理，当一台计算机上托管了多个虚拟主机的时候，服务器端就需要用Host字段来选择。

#### User-Agent

请求字段，服务器可以依据它来返回最合适此浏览器显示的页面。

#### Date

通用字段，但通常出现在响应头里，表示HTTP报文创建的时间。

#### Server

响应字段，告诉客户端正在提供Web服务的软件名称和版本号。

#### Content-Length

表示报文里body的长度，也就是请求头或响应头空行后面数据的长度。服务器看到这个字段，就知道了后续有多少数据，可以直接接收。如果没有这个字段，那么body就是不定长的，需要使用chunked方式分段传输。